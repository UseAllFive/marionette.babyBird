!function(a){"function"==typeof define&&define.amd?define(["backbone","marionette","underscore"],a):a(Backbone,Marionette,_)}(function(a,b,c){function d(a){function b(a,b){return g+b}return c.each(a,function(c,e){var g;if("object"==typeof c)a[e]=d(c);else if("string"==typeof c){for(g=0;f-1>g;g+=1)c=c.replace(/ ([^ ]+)$/,b);a[e]=c}}),a}function e(b){var d;return b instanceof a.Collection?b=b.toJSON():b instanceof a.Model?(d=b.id,b=b.toJSON(),b.id=d):b=c.clone(b),c.each(b,function(a,d){c.isObject(a)&&(b[d]=e(a))}),b}var f=2,g=String.fromCharCode(160),h=b.Renderer.render;return b.Renderer.render=function(a,b){try{var c;return c=e(b),c=d(c),h.call(this,a,c)}catch(f){return console.error(f),h.apply(this,arguments)}},b});