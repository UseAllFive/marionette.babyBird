!function(a){"function"==typeof define&&define.amd?define(["backbone","marionette","underscore"],a):a(Backbone,Marionette,_)}(function(a,b,c){function d(a){function b(a,b){return h+b}return c.each(a,function(c,e){var h;if("object"==typeof c)a[e]=d(c);else if("string"==typeof c&&c.split(/ /).length>g){for(h=0;f-1>h;h+=1)c=c.replace(/ ([^ ]+)$/,b);a[e]=c}}),a}function e(b){var d;return b instanceof a.Collection?b=b.toJSON():b instanceof a.Model?(d=b.id,b=b.toJSON(),b.id=d):b=c.clone(b),c.each(b,function(a,c){"object"==typeof a&&(b[c]=e(a))}),b}var f=2,g=10,h=String.fromCharCode(160),i=b.Renderer.render;return b.Renderer.render=function(a,b){try{var c;return c=e(b),c=d(c),i.call(this,a,c)}catch(f){return console.error(f),i.apply(this,arguments)}},b});